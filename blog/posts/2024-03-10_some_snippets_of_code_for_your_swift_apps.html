<!DOCTYPE html> <html><head>
		<title>Some snippets of code for your Swift apps - Extiri Blog</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="Obsidian - Some snippets of code for your Swift apps">
		<meta property="og:title" content="Some snippets of code for your Swift apps">
		<meta property="og:description" content="Obsidian - Some snippets of code for your Swift apps">
		<meta property="og:type" content="website">
		<meta property="og:url" content="posty/Some snippets of code for your Swift apps.html">
		<meta property="og:image" content="undefined">
		<meta property="og:site_name" content="Obsidian">
		<script async="" src="../script.js"></script>
		<link rel="stylesheet" href="../style.css">
		</head>
		<body class="publish css-settings-manager show-inline-title">
			<script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script>
			<div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style>
			<div class="markdown-preview-sizer markdown-preview-section">
			<h1>extiri blog</h1>
				<p><a href="../index.html">Blog</a> - <a href="../../../index.html">Extiri homepage</a></p>
				<br>
				<br>
			<h1 class="page-title heading inline-title" id="Some snippets of code for your Swift apps">Some snippets of code for your Swift apps</h1><div><p dir="auto">Hi! While programming in Swift I have accumulated many code snippets. Some of them are mine and some of them come from the internet. Here I'm sharing 5 tiny quality-of-life snippets. Hopefully you will find them useful.</p></div><div class="heading-wrapper"><h3 data-heading="1. (Cocoa) Accessing NSWindow from NSViewController" dir="auto" class="heading" id="1._(Cocoa)_Accessing_NSWindow_from_NSViewController"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>1. (Cocoa) Accessing NSWindow from NSViewController</h3><div class="heading-children"><div class="has-run-code-button"><pre class="language-swift" tabindex="0"><code class="language-swift is-loaded"><span class="token keyword">extension</span> <span class="token class-name">NSViewController</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> window<span class="token punctuation">:</span> <span class="token class-name">NSWindow</span><span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> window <span class="token keyword">in</span> <span class="token class-name">NSApp</span><span class="token punctuation">.</span>windows <span class="token punctuation">{</span>
      <span class="token keyword">if</span> window<span class="token punctuation">.</span>contentViewController <span class="token operator">==</span> <span class="token keyword">self</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> window
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token nil constant">nil</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div><p dir="auto">This snippet adds a window variable to NSViewController. It requires the window to exist (eg. be in NSApp.windows, in most cases that will be true) and that there is only one window with the specified view controller. It will return the window with the view controller on which it is called.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="2. Checking if path leads to a directory" dir="auto" class="heading" id="2._Checking_if_path_leads_to_a_directory"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>2. Checking if path leads to a directory</h3><div class="heading-children"><div class="has-run-code-button"><pre class="language-swift" tabindex="0"><code class="language-swift is-loaded"><span class="token keyword">extension</span> <span class="token class-name">FileManager</span> <span class="token punctuation">{</span>
  <span class="token keyword">func</span> <span class="token function-definition function">isDirectory</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> isDirectory<span class="token punctuation">:</span> <span class="token class-name">ObjCBool</span> <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">fileExists</span><span class="token punctuation">(</span>atPath<span class="token punctuation">:</span> path<span class="token punctuation">,</span> isDirectory<span class="token punctuation">:</span> <span class="token operator">&amp;</span>isDirectory<span class="token punctuation">)</span>
    <span class="token keyword">return</span> isDirectory<span class="token punctuation">.</span>boolValue
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div><p dir="auto">This is a simple wrapper around <code>FileManager.fileExists()</code> as an extension to <code>FileManager</code> that checks whether a path provided as a string leads to a directory.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="3. Safely accessing an array" dir="auto" class="heading" id="3._Safely_accessing_an_array"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>3. Safely accessing an array</h3><div class="heading-children"><div class="has-run-code-button"><pre class="language-swift" tabindex="0"><code class="language-swift is-loaded"><span class="token keyword">extension</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
	<span class="token keyword">subscript</span><span class="token punctuation">(</span>safely index<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Element</span><span class="token operator">?</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> index <span class="token operator">&lt;</span> <span class="token keyword">self</span><span class="token punctuation">.</span>endIndex <span class="token operator">&amp;&amp;</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span>  <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">self</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token nil constant">nil</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div><p dir="auto">This snippet adds a subscript to arrays. It checks whether index is within the array's range then returns an element or nil depending on the check. You can use it like this: </p></div><div class="has-run-code-button"><pre class="language-swift" tabindex="0"><code class="language-swift is-loaded"><span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">"a"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"b"</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"c"</span></span><span class="token punctuation">]</span>
<span class="token keyword">let</span> value <span class="token operator">=</span> array<span class="token punctuation">[</span>safely<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">// returns Optional("c")</span>
</code></pre></div><div><p dir="auto">This might save you few lines of code for checking and force you to handle the edge case without crashing the app.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="4. (SwiftUI) Web view wrapper" dir="auto" class="heading" id="4._(SwiftUI)_Web_view_wrapper"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>4. (SwiftUI) Web view wrapper</h3><div class="heading-children"><div class="has-run-code-button"><pre class="language-swift" tabindex="0"><code class="language-swift is-loaded"><span class="token keyword">struct</span> <span class="token class-name">WebView</span><span class="token punctuation">:</span> <span class="token class-name">NSViewRepresentable</span> <span class="token punctuation">{</span>
	<span class="token comment">/// URL of current page. If changed, WebView will change it into the new URL.</span>
	<span class="token attribute atrule">@Binding</span> <span class="token keyword">var</span> url<span class="token punctuation">:</span> <span class="token constant">URL</span>
	
	<span class="token keyword">private</span> <span class="token keyword">var</span> onLoadStart<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">private</span> <span class="token keyword">var</span> onLoadFinish<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
	
  <span class="token comment">/// A WKWebView instance, which is used to render WebView, and which can be used to control it thanks to classes being passed by reference.</span>
	<span class="token keyword">private</span> <span class="token keyword">var</span> wkWebView<span class="token punctuation">:</span> <span class="token class-name">WKWebView</span>
	
  <span class="token comment">/// Accepts a binding to an URL, WKWebView instance, which can be used to control WebView and onLoadStart and onLoadFinish which will run when WebView starts or finishes loading a webpage.</span>
	<span class="token keyword">init</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> <span class="token class-name">Binding</span><span class="token operator">&lt;</span><span class="token constant">URL</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> wkWebView<span class="token punctuation">:</span> <span class="token class-name">WKWebView</span> <span class="token operator">=</span> <span class="token class-name">WKWebView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> onLoadStart<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> onLoadFinish<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">self</span><span class="token punctuation">.</span>wkWebView <span class="token operator">=</span> wkWebView
		
		<span class="token keyword">self</span><span class="token punctuation">.</span>_url <span class="token operator">=</span> url
		
		<span class="token keyword">if</span> <span class="token keyword">let</span> onLoadStart <span class="token operator">=</span> onLoadStart <span class="token punctuation">{</span>
			<span class="token keyword">self</span><span class="token punctuation">.</span>onLoadStart <span class="token operator">=</span> onLoadStart
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">self</span><span class="token punctuation">.</span>onLoadStart <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> <span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">if</span> <span class="token keyword">let</span> onLoadFinish <span class="token operator">=</span> onLoadFinish <span class="token punctuation">{</span>
			<span class="token keyword">self</span><span class="token punctuation">.</span>onLoadFinish <span class="token operator">=</span> onLoadFinish
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">self</span><span class="token punctuation">.</span>onLoadFinish <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> <span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">func</span> <span class="token function-definition function">makeNSView</span><span class="token punctuation">(</span>context<span class="token punctuation">:</span> <span class="token class-name">Context</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">WKWebView</span> <span class="token punctuation">{</span>
		wkWebView<span class="token punctuation">.</span>navigationDelegate <span class="token operator">=</span> context<span class="token punctuation">.</span>coordinator
		wkWebView<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">URLRequest</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span>
		
		<span class="token keyword">return</span> wkWebView
	<span class="token punctuation">}</span>
	
	<span class="token keyword">func</span> <span class="token function-definition function">updateNSView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> nsView<span class="token punctuation">:</span> <span class="token class-name">WKWebView</span><span class="token punctuation">,</span> context<span class="token punctuation">:</span> <span class="token class-name">Context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		nsView<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">URLRequest</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">func</span> <span class="token function-definition function">makeCoordinator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Coordinator</span> <span class="token punctuation">{</span>
		<span class="token class-name">Coordinator</span><span class="token punctuation">(</span>onLoadStart<span class="token punctuation">:</span> onLoadStart<span class="token punctuation">,</span> onLoadFinish<span class="token punctuation">:</span> onLoadFinish<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">class</span> <span class="token class-name">Coordinator</span><span class="token punctuation">:</span> <span class="token class-name">NSObject</span><span class="token punctuation">,</span> <span class="token class-name">WKNavigationDelegate</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> onLoadStart<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">let</span> onLoadFinish<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
		
		<span class="token keyword">init</span><span class="token punctuation">(</span>onLoadStart<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> onLoadFinish<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">WKWebView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">self</span><span class="token punctuation">.</span>onLoadStart <span class="token operator">=</span> onLoadStart
			<span class="token keyword">self</span><span class="token punctuation">.</span>onLoadFinish <span class="token operator">=</span> onLoadFinish
		<span class="token punctuation">}</span>
		
		<span class="token keyword">func</span> <span class="token function-definition function">webView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> webView<span class="token punctuation">:</span> <span class="token class-name">WKWebView</span><span class="token punctuation">,</span> didCommit navigation<span class="token punctuation">:</span> <span class="token class-name">WKNavigation</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">onLoadStart</span><span class="token punctuation">(</span>webView<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">func</span> <span class="token function-definition function">webView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> webView<span class="token punctuation">:</span> <span class="token class-name">WKWebView</span><span class="token punctuation">,</span> didFinish navigation<span class="token punctuation">:</span> <span class="token class-name">WKNavigation</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">onLoadFinish</span><span class="token punctuation">(</span>webView<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div><p dir="auto">This pretty lengthy snippet adds a simple SwiftUI wrapper around <code>WKWebView</code> (which needs to be imported). It only requires a binding to a url, which will be loaded. In more complex cases, you can pass <code>onLoadStart</code> and <code>onLoadFinish</code> handlers which will run when the web view starts and finishes loading and a <code>WKWebView</code> class instance. Since in Swift classes are passed by reference, you can use this instance in your view to control the web view (go back, forward, etc).</p></div></div></div><div class="heading-wrapper"><h3 data-heading="5. (Cocoa) Showing an alert" dir="auto" class="heading" id="5._(Cocoa)_Showing_an_alert"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>5. (Cocoa) Showing an alert</h3><div class="heading-children"><div class="has-run-code-button"><pre class="language-swift" tabindex="0"><code class="language-swift is-loaded"><span class="token keyword">func</span> <span class="token function-definition function">showAlert</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> informative<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> buttons<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> completionHandler<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">NSApplication</span><span class="token punctuation">.</span><span class="token class-name">ModalResponse</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> alert <span class="token operator">=</span> <span class="token class-name">NSAlert</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		
		alert<span class="token punctuation">.</span>messageText <span class="token operator">=</span> message
		alert<span class="token punctuation">.</span>informativeText <span class="token operator">=</span> informative
		
		buttons<span class="token punctuation">.</span>forEach <span class="token punctuation">{</span> alert<span class="token punctuation">.</span><span class="token function">addButton</span><span class="token punctuation">(</span>withTitle<span class="token punctuation">:</span> <span class="token short-argument">$0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
		
		<span class="token keyword">let</span> result <span class="token operator">=</span> alert<span class="token punctuation">.</span><span class="token function">runModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token function">completionHandler</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div><p dir="auto">Once again, a wrapper. It wraps <code>NSAlert</code> in one function so that you don't need to rewrite this code. It accepts a message and informative text which will be used on the alert. It also optionally accepts a list of button titles which will be added to the alert. It also runs asynchronously on the main thread, so it works even when run in another thread. Here I'd like to add that you can use <code>NSAlert.accessoryView</code> to create alerts with custom views, for example I did something like this:</p></div><div class="has-run-code-button"><pre class="language-swift" tabindex="0"><code class="language-swift is-loaded"><span class="token keyword">func</span> <span class="token function-definition function">showChoicePrompt</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> informativeText<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> buttons<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">,</span> completionHandler<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> alert <span class="token operator">=</span> <span class="token class-name">NSAlert</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  alert<span class="token punctuation">.</span><span class="token function">addButton</span><span class="token punctuation">(</span>withTitle<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"OK"</span></span><span class="token punctuation">)</span>
  alert<span class="token punctuation">.</span><span class="token function">addButton</span><span class="token punctuation">(</span>withTitle<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Cancel"</span></span><span class="token punctuation">)</span>
  
  alert<span class="token punctuation">.</span>messageText <span class="token operator">=</span> message
  alert<span class="token punctuation">.</span>informativeText <span class="token operator">=</span> informativeText

  <span class="token keyword">let</span> popUp <span class="token operator">=</span> <span class="token class-name">NSPopUpButton</span><span class="token punctuation">(</span>frame<span class="token punctuation">:</span> <span class="token class-name">NSRect</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  popUp<span class="token punctuation">.</span><span class="token function">addItems</span><span class="token punctuation">(</span>withTitles<span class="token punctuation">:</span> buttons<span class="token punctuation">)</span>

  alert<span class="token punctuation">.</span>accessoryView <span class="token operator">=</span> popUp

  <span class="token keyword">let</span> response<span class="token punctuation">:</span> <span class="token class-name">NSApplication</span><span class="token punctuation">.</span><span class="token class-name">ModalResponse</span> <span class="token operator">=</span> alert<span class="token punctuation">.</span><span class="token function">runModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> response <span class="token operator">==</span> <span class="token class-name">NSApplication</span><span class="token punctuation">.</span><span class="token class-name">ModalResponse</span><span class="token punctuation">.</span>alertFirstButtonReturn <span class="token punctuation">{</span>
    <span class="token function">completionHandler</span><span class="token punctuation">(</span>popUp<span class="token punctuation">.</span>selectedItem<span class="token operator">?</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">completionHandler</span><span class="token punctuation">(</span><span class="token nil constant">nil</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div><p dir="auto">which creates an alert with a pop up button for selecting a value.</p></div><div><p dir="auto">As a sidenote, if you are dealing with many snippets of various types (like these ones), <a href="">CodeMenu</a> can help you organize, access and use their full potential.</p></div><div class="mod-footer"></div></div></div></div></div></body></html>